#!/bin/bash 
################################################################################
#                                                                              #
#   Makeit - A script to build the current package. Usage: makeit              #
#                                                                              #
#                                                                              #
################################################################################

module purge
module load envvar/1.0
module load PrgEnv-intel/8.1.0
module load craype/2.7.8
module load intel/19.1.3.304
module load cray-mpich/8.1.7
module load netcdf/3.6.3  
module list

NETCDF_LIB="$NETCDF_LIB  -lnetcdf -lnetcdf_c++"

export ESMF_F90COMPILER=ftn         
export ESMF_F90LINKER=ftn           

export ESMF_DIR=`pwd`

##export ESMF_NETCDF=split
##export ESMF_NETCDF_INCLUDE=$NETCDF_INC
##export ESMF_NETCDF_LIBPATH=$NETCDF_LIB

export ESMF_OS=Linux
export ESMF_MACHINE=x86_64
export ESMF_ABI=64
export ESMF_COMPILER=intel
export ESMF_BOPT=O
export ESMF_COMM=intelmpi
export ESMF_SITE=default
export ESMF_PTHREADS=OFF
export ESMF_ARRAY_LITE=FALSE
export ESMF_NO_INTEGER_1_BYTE=FALSE
export ESMF_NO_INTEGER_2_BYTE=FALSE
export ESMF_FORTRANSYMBOLS=default
export ESMF_TESTEXHAUSTIVE=OFF
export ESMF_TESTWITHTHREADS=OFF
export ESMF_TESTMPMD=OFF
export ESMF_OPENMP=OFF     

rm -rf lib
rm -rf mod
rm -rf obj
mkdir lib
mkdir mod
mkdir obj

gmake

exit


