Minor change

DESCRIPTION OF CHANGE:  

1. Porting from WCOSS phase2 to WCOSS phase3.
2. Fix some small bugs.

BENEFIT OF CHANGE: 

1. WCOSS phase1 and phase2 soon to be decommissioned.

USER IMPACT STATEMENT:

1. Negligible.

TECHNICAL IMPACT STATEMENT:

1. No technical impact is anticipated.

RISKS:

1. None expected

PROPOSED IMPLEMENTATION
DATE: 
TIME:

IMPLEMENTATION INSTRUCTIONS:

I. BUILD A PROJECT
-------------------

II.1)  Check out RTOFS_GLOBAL:
       git clone -b RB-1.3.0 ssh://$USER@vlab.ncep.noaa.gov:29418/EMC_rtofs_glo_prod
       into /gpfs/dell1/nco/ops/nwprod/
       The result will be the directory 
       /gpfs/dell1/nco/ops/nwprod/EMC_rtofs_glo_prod
II.2)  Rename the directory
       mv  EMC_rtofs_glo_prod rtofs_glo.v1.3.0
II.3)  cd rtofs_glo.v1.3.0
       mkdir -p exec fix

II. COMPILE PROJECT SOURCE CODES
--------------------------------

cd rtofs_glo.v1.3.0/sorc
In ./install.sh, modify the location of RTOFS_LIB
./install.sh

III. SET-UP FIX FILES
---------------------

NOTE III.1: fix files are too big to be part of the repository. 

 cp -p  /gpfs/dell2/emc/modeling/noscrub/Dan.Iredell/rtofs_global/fix/* rtofs_glo.v1.3.0/fix/.

IV. SET-UP INITIAL CONDITIONS
----------------------------

V.1) module load prod_envir/1.0.3
V.2) mkdir -p $COMROOTp3/rtofs/$envir
V.3) ln -s $COMROOTp2/rtofs/prod/rtofs.YYYYMMDD  $COMROOTp3/rtofs/$envir/rtofs.YYYYMMDD  (for PDYm1)
V.4) mkdir -p $GESROOTp3/rtofs/$envir
V.5) ln -s $GESROOTp2/rtofs/prod/rtofs.YYYYMMDD  $GESROOTp3/rtofs/$envir/rtofs.YYYYMMDD  (for PDYm1 and PDYm2)

V. COMPUTER RESOURCES AND RUN-TIME ENVIRONMENT
------------------------------------------------

Computer resources and sample LSF command files  the same as for rtofs_glo.v1.1.4 currently in production. 

anal_pre:                                CPU time: 17 min. Max. Memory: 18731 MB    Resources: rtofs_job_command_anal_pre.lsf                    
anal:                                    CPU time: 50 min. Max. Memory: 1818750 MB  Resources: rtofs_job_command_anal_grib_post.lsf
anal_post:                               CPU time: 13 min. Max. Memory: 101324 MB   Resources: rtofs_job_command_anal_post.lsf
anal_grib2_post:                         CPU time: 23 min. Max. Memory: 8016 MB     Resources: rtofs_job_command_anal_grib_post.lsf

fcst_step1_pre:                          CPU time: 10 min. Max. Memory: 2636 MB     Resources: rtofs_job_command_fcst_step1_pre.lsf         
fcst_step1:                              CPU time: 96 min. Max. Memory: 1818867 MB  Resources: rtofs_job_command_fcst_step1.lsf                
fcst_post.01 - fcst_post.04:             CPU time: 7 min.  Max. Memory: 99509 MB    Resources: rtofs_job_command_fcst_post.lsf
fcst_grib2_post.01 - fcst_grib2_post.03: CPU time: 29 min. Max. Memory: 8582 MB     Resources: rtofs_job_command_fcst_grib_post.lsf

fcst_step2_pre:                          CPU time: 10 min  Max. Memory: 2636 MB     Resources: rtofs_job_command_fcst_step2_pre.lsf            
fcst_step2:                              CPU time: 96 min. Max. Memory: 1818795 MB  Resources: rtofs_job_command_fcst_step2.lsf             
fcst_post.00 - fcst_post.08:             CPU time: 7 min.  Max. Memory: 99509 MB    Resources: rtofs_job_command_fcst_post.lsf
fcst_post_2:                             CPU time: 5 min.  Max. Memory: 3499 MB     Resources: rtofs_job_command_fcst_post.lsf
fcst_grib2_post.04 - fcst_grib2_post.06: CPU time: 29 min. Max. Memory: 8582 MB     Resources: rtofs_job_command_fcst_grib_post.lsf

     
VI. JOB DEPENDENCIES
-------------------

VI.1a) anal_pre:                                after GFS 00Z cycle is completed. 
VI.1b) anal:                                    after 1a is completed
VI.1c) anal_post:                               after 1b is completed
VI.1d) anal_grib2_post:                         after 1b is completed

VI.2a) fcst_step1_pre:                          after GFS 00Z cycle is completed.
VI.2b) fcst_step1:                              after 1b is completed
VI.2c) fcst_post.01 - fcst_post.04:             after 2b is completed
VI.2d) fcst_grib2_post.01 - fcst_grib2_post.03: after 2b is completed

VI.3a) fcst_step2_pre:                          after GFS 00Z cycle is completed.
VI.3b) fcst_step2:                              after 2b is completed
VI.3c) fcst_post.0 - fcst_post.08:              after 3b is completed
VI.3d) fcst_grib2_post.04 - fcst_grib2_post.06: after 3b is completed
VI.3f) fcst_post_2                              after 3b is completed

NOTE VI.1: At is assumed that for all post-processing jobs $job has the name structure 
             of the type job_*NN, where NN is two-digit number.
NOTE VI.2: GRIB2 post-processing for forecast is done only for the first 6 days.

